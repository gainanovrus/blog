<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.14.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Monitoring system for Docker SLURM cluster - BLOG.GAINANOV.PRO</title>
<meta name="description" content="Design and deploy a system for collect, store and visualize data from SLURM cluster realized on Docker environment.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="BLOG.GAINANOV.PRO">
<meta property="og:title" content="Monitoring system for Docker SLURM cluster">
<meta property="og:url" content="https://gainanovrus.github.io/blog/portfolio/influxdb-slurm-monitoring/">


  <meta property="og:description" content="Design and deploy a system for collect, store and visualize data from SLURM cluster realized on Docker environment.">



  <meta property="og:image" content="https://gainanovrus.github.io/blog/assets/images/influxdb-slurm-monitoring/influxdb-slurm-monitoring-banner.png">



  <meta name="twitter:site" content="@gainanovrus">
  <meta name="twitter:title" content="Monitoring system for Docker SLURM cluster">
  <meta name="twitter:description" content="Design and deploy a system for collect, store and visualize data from SLURM cluster realized on Docker environment.">
  <meta name="twitter:url" content="https://gainanovrus.github.io/blog/portfolio/influxdb-slurm-monitoring/">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://gainanovrus.github.io/blog/assets/images/influxdb-slurm-monitoring/influxdb-slurm-monitoring-banner.png">
  

  



  <meta property="article:published_time" content="2019-01-03T12:56:16+03:00">





  

  


<link rel="canonical" href="https://gainanovrus.github.io/blog/portfolio/influxdb-slurm-monitoring/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Ruslan Gainanov",
      "url": "https://gainanovrus.github.io/blog",
      "sameAs": ["https://www.facebook.com/gainanovrus","https://twitter.com/gainanovrus","https://linkedin.com/in/gainanovrus"]
    }
  </script>



  <meta name="google-site-verification" content="Wq8i7X_W6EpXbttUnWRWiok4EyvFVb-nyUaY_kDLDMc" />




  <meta name="yandex-verification" content="cfbcdd4107182b42">


<!-- end _includes/seo.html -->


<link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="BLOG.GAINANOV.PRO Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/blog/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    
    <script src="/blog/assets/js/buttons.js"></script>
  


    <!-- start custom head snippets -->
<!-- <link href="/assets/css/tagcloud04.css" rel="stylesheet" type="text/css"> -->
<link href="https://gainanovrus.github.io/favicon.ico" rel="icon" type="image/x-icon" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115465350-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115465350-1');
</script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter50010985 = new Ya.Metrika2({
                    id:50010985,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/tag.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks2");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/50010985" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/blog/">BLOG.GAINANOV.PRO</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/blog/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/blog/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/blog/portfolio/" >Portfolio</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  











<div class="page__hero"
  style=" "
>
  
    <img src="/blog/assets/images/influxdb-slurm-monitoring/influxdb-slurm-monitoring-banner.png" alt="Monitoring system for Docker SLURM cluster" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/blog/assets/images/author-150x150.jpg" alt="Ruslan Gainanov" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Ruslan Gainanov</h3>
    
    
      <p class="author__bio" itemprop="description">
        System & Software engineer
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      
        <li>
          <a href="http://gainanov.pro" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i> Website
          </a>
        </li>
      

      
        <li>
          <a href="mailto:gromrx1@gmail.com">
            <meta itemprop="email" content="gromrx1@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
      

      

    </ul>
  </div>
</div>

  
    
      
        <img src=
        
          "/blog/assets/images/influxdb-slurm-monitoring/icmm_logo-min.png"
        
        alt="logo">
      
      <h3>Role</h3>
      <p>DevOps engineer</p>

      
    
      
      <h3>Responsibilities</h3>
      <p>Design a system for monitoring tasks queue, node loads and system statics of SLURM cluster in Institute of Continuous Media Mechanics (ICMM UB RAS)</p>

      
    
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Monitoring system for Docker SLURM cluster">
    <meta itemprop="description" content="Design and deploy a system for collect, store and visualize data from SLURM cluster realized on Docker environment.">
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Monitoring system for Docker SLURM cluster
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Institute of Continuous Media Mechanics (<a href="https://www.icmm.ru/en/about-institute">ICMM UB RAS</a>) has a high-performance cluster consist of about 50 nodes with &gt;400 CPUs and more than 1 TB RAM.
It’s needed to make models of new materials and calculate its properties.
And in the future, the Institute has plans to upgrade his infrastructure and virtualize his resources to get less dependencies of a hardware layer.
The cluster uses <a href="https://slurm.schedmd.com/overview.html">Slurm workload manager</a> to run programs on compute nodes.
With SLURM many scientist can easy run his programs on the cluster in parallel and independent.</p>

<p>And I should work with these systems.
My primary task is to make scripts for deploying virtual compute infrastructure with <a href="https://www.docker.com/">Docker</a>.
My second task is to design and configure a monitoring system to collect and view system statics in the real-time.</p>

<p>Has been developed a script that deploying a simple SLURM configuration with docker-compose.
Instead of docker-compose could be used <a href="https://docs.docker.com/engine/reference/commandline/stack/">docker stack</a> command with Docker <a href="https://docs.docker.com/engine/swarm/">Swarm</a> to deploy containers to a compute nodes with included SLURM software.
All information is described on <a href="https://github.com/GRomR1/docker-slurmbase">GitHub</a>.</p>

<p>I have used a stack <a href="http://influxdata.com">InfluxDB</a>+<a href="http://grafana.com">Grafana</a>, I’ve known good from my <a href="_portfolio/visualisation-jinr-cloud.md">previous</a> work, to realize a monitoring system.
I use HDF5 profiling plugin for collecting data about runned tasks.
This plugin was based of work of the <a href="https://github.com/cfenoy/influxdb-slurm-monitoring">cfenoy</a> user.
I’ve modified it to work with the last SLURM version and add gathering some new fields.
Also was configured a Grafana dashboard that helps view all statistics about task that have been ever run on the HPC cluster.</p>

<hr />
<h3 id="docker-slurmbase">docker-slurmbase:</h3>

<p><a href="https://github.com/GRomR1/docker-slurmbase">https://github.com/GRomR1/docker-slurmbase</a></p>

<h3 id="influxdb-slurm-monitoring">influxdb-slurm-monitoring:</h3>

<p><a href="https://github.com/GRomR1/influxdb-slurm-monitoring">https://github.com/GRomR1/influxdb-slurm-monitoring</a></p>

<hr />

<figure class="half ">
  
    
      <a href="/blog/assets/images/influxdb-slurm-monitoring/influxdb-slurm-monitoring-scheme.png">
        <img src="/blog/assets/images/influxdb-slurm-monitoring/influxdb-slurm-monitoring-scheme.png" alt="Scheme of SLURM cluster and monitoring system" />
      </a>
    
  
    
      <a href="/blog/assets/images/influxdb-slurm-monitoring/grafana-all-panels.png">
        <img src="/blog/assets/images/influxdb-slurm-monitoring/grafana-all-panels.png" alt="An example dashboard to view system statistics" />
      </a>
    
  
  
</figure>


        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=gainanovrus&text=Monitoring+system+for+Docker+SLURM+cluster%20https%3A%2F%2Fgainanovrus.github.io%2Fblog%2Fportfolio%2Finfluxdb-slurm-monitoring%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgainanovrus.github.io%2Fblog%2Fportfolio%2Finfluxdb-slurm-monitoring%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Fgainanovrus.github.io%2Fblog%2Fportfolio%2Finfluxdb-slurm-monitoring%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fgainanovrus.github.io%2Fblog%2Fportfolio%2Finfluxdb-slurm-monitoring%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="/blog/portfolio/robot-motion-system/" class="pagination--pager" title="Computer-aided system to control a moving of a robotic system in an environment with obstacles
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    

    <li><a href="/blog/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Ruslan Gainanov. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/blog/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js" integrity="sha384-z9ZOvGHHo21RqN5De4rfJMoAxYpaVoiYhuJXPyVmSs8yn20IE3PmBM534CffwSJI" crossorigin="anonymous"></script>




<script src="/blog/assets/js/lunr/lunr.min.js"></script>
<script src="/blog/assets/js/lunr/lunr-store.js"></script>
<script src="/blog/assets/js/lunr/lunr-en.js"></script>





  </body>
</html>
